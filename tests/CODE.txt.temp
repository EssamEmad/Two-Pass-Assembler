0 COPY START 0
0000 FIRST STL RETADR
0003  LDB #LENGTH
0006  BASE LENGTH
0006 CLOOP +JSUB RDREC
0009  LDA LENGTH
000c  COMP #0
000f  JEQ ENDFIL
0012  +JSUB WRREC
0015  J CLOOP
0018 ENDFIL LDA EOF
001b  STA BUFFER
001e  LDA #3
0021  STA LENGTH
0024  +JSUB WRREC
0027  J @RETADR
002a EOF BYTE C'EOF'
002d RETADR RESW 1
0030 LENGTH RESW 1
0033 BUFFER RESB 4096
1033 RDREC CLEAR X
1036  CLEAR A
1039  CLEAR S
103c  +LDT #4096
103f RLOOP TD INPUT
1042  JEQ RLOOP
1045  RD INPUT
1048  COMPR A,S
104b  JEQ EXIT
104e  STCH BUFFER,X
1051  TIXR T
1054  JLT RLOOP
1057 EXIT STX LENGTH
105a  RSUB 
105d INPUT BYTE X'F1'
105e WRREC CLEAR X
1061  LDT LENGTH
1064 WLOOP TD OUTPUT
1067  JEQ WLOOP
106a  LDCH BUFFER,X
106d  WD OUTPUT
1070  TIXR T
1073  JLT WLOOP
1076  RSUB 
1079 OUTPUT BYTE X'05'
107a  END FIRST
