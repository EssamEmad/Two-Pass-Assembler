0 COPY START 0
0000 FIRST STL RETADR
0003  LDB #LENGTH
0006  BASE LENGTH
0006 CLOOP +JSUB RDREC
000a  LDA LENGTH
000d  COMP #0
0010  JEQ ENDFIL
0013  +JSUB WRREC
0017  J CLOOP
001a ENDFIL LDA EOF
001d  STA BUFFER
0020  LDA #3
0023  STA LENGTH
0026  +JSUB WRREC
002a  J @RETADR
002d EOF BYTE C'EOF'
0030 RETADR RESW 1
0033 LENGTH RESW 1
0036 BUFFER RESB 4096
1036 RDREC CLEAR X
1039  CLEAR A
103c  CLEAR S
103f  +LDT #4096
1043 RLOOP TD INPUT
1046  JEQ RLOOP
1049  RD INPUT
104c  COMPR A,S
104f  JEQ EXIT
1052  STCH BUFFER,X
1055  TIXR T
1058  JLT RLOOP
105b EXIT STX LENGTH
105e  RSUB 
1061 INPUT BYTE X'F1'
1062 WRREC CLEAR X
1065  LDT LENGTH
1068 WLOOP TD OUTPUT
106b  JEQ WLOOP
106e  LDCH BUFFER,X
1071  WD OUTPUT
1074  TIXR T
1077  JLT WLOOP
107a  RSUB 
107d OUTPUT BYTE X'05'
107e  END FIRST
